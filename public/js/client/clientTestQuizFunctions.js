function deleteReadingComment(t){bootbox.confirm({title:"Delete Reading Comment",message:"Do you want to delete this comment?"+t,buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel',className:"btn-danger"},confirm:{label:'<i class="fa fa-check"></i> Confirm',className:"btn-success"}},callback:function(e){if(e){var a=baseUrl+"/deleteCommentReading/"+t;console.log("ajaxDelCommentReading "+a),$.ajax({type:"GET",url:a,dataType:"json",success:function(e){bootbox.alert({message:"Delete comment success! "+e.result,backdrop:!0,callback:function(){0==$(".btn-set-comment-public[data-id="+t+"]").data("reply-id")?$(".list-cmt-"+t).remove():$("#comment"+t).remove()}})},error:function(t){bootbox.alert({message:"Delete comment fail!",backdrop:!0})}})}}})}function setPublicReadingComment(t){$(this);bootbox.confirm({title:"Set public reading comment",message:"Do you want to set public for this comment?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel',className:"btn-danger"},confirm:{label:'<i class="fa fa-check"></i> Confirm',className:"btn-success"}},callback:function(e){if(e){var a=baseUrl+"/setPublicReadingComment/"+t;$.ajax({type:"GET",url:a,dataType:"json",success:function(e){bootbox.alert({message:"Set public comment success! "+e.result,backdrop:!0,callback:function(){$(".btn-set-comment-public[data-id="+t+"]").prop("disabled",!0),$(".btn-set-comment-private[data-id="+t+"]").prop("disabled",!1)}})},error:function(t){bootbox.alert({message:"Set public comment fail!",backdrop:!0})}})}}})}function setPrivateReadingComment(t){bootbox.confirm({title:"Set private reading comment",message:"Do you want to set private for this comment?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel',className:"btn-danger"},confirm:{label:'<i class="fa fa-check"></i> Confirm',className:"btn-success"}},callback:function(e){if(e){var a=baseUrl+"/setPrivateReadingComment/"+t;$.ajax({type:"GET",url:a,dataType:"json",success:function(e){bootbox.alert({message:"Set private comment success! "+e.result,backdrop:!0,callback:function(){$(".btn-set-comment-public[data-id="+t+"]").prop("disabled",!1),$(".btn-set-comment-private[data-id="+t+"]").prop("disabled",!0)}})},error:function(t){bootbox.alert({message:"Set private comment fail!",backdrop:!0})}})}}})}function scrollToHighlight(t){var e=$(".highlighting");e.removeClass("highlighting"),e.addClass("hidden-highlight"),$(".highlight-"+t).removeClass("hidden-highlight"),$(".highlight-"+t).addClass("highlighting"),$("html, body").animate({scrollTop:$(".panel-container").offset().top},100);$("#lesson-highlight-area .highlight-"+t).data("qnumber");var a="highlight-"+t,s=$(".left-panel-custom").offset().top,i=$("."+a).offset().top+$(".left-panel-custom").scrollTop()-s;$(".left-panel-custom").animate({scrollTop:i-60},{duration:100,complete:function(){}})}function scrollToExplain(t){$("html, body").animate({scrollTop:$(".panel-container").offset().top},100);var e=$(".right-panel-custom").offset().top,a=$(".explain-"+t).offset().top+$(".right-panel-custom").scrollTop()-e;$(".right-panel-custom").animate({scrollTop:a-100},{duration:100,complete:function(){}})}function showComments(t,e){e=e||!1;var a=baseUrl+"/showComments/"+t;$("#loading").show(),$.ajax({type:"GET",url:a,dataType:"json",success:function(a){if(console.log("sucess:",a),$("#commentArea-"+t+" .comments-area").html(""),a.list_comments.length>0&&jQuery.each(a.list_comments,function(e,s){var i=s.avatar,c=s.content_cmt,n=s.updated_at,m=s.id,o=s.question_id,l=s.username,r=s.reply_id,d="",p="",u="item-cmt-public";1==s.private?(d="disabled",u="item-cmt-private"):p="disabled",0==a.level_current_user?0==r?$("#commentArea-"+t+" .comments-area").append('<div class="row list-cmt-area list-cmt-'+m+'" data-cmt-id="'+m+'"><div class="item-cmt cmt-'+m+" "+u+'" id="comment'+m+'" data-cmt-id="'+m+'"><span class="img-avatar"><img alt="" src='+i+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+l+'</div><div class="item-cmt-body">'+c+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">'+n+'</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-success btn-admin-custom btn-set-comment-public" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="setPublicReadingComment('+m+')"'+p+'>Set public</button><button type="button" class="btn btn-warning btn-admin-custom btn-set-comment-private" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="setPrivateReadingComment('+m+')"'+d+'>Set private</button><button type="button" class="btn btn-danger btn-admin-custom btn-del-lesson" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="deleteReadingComment('+m+')">Del</button><button type="button" class="btn btn-reply-cmt btn-sm btn-outline-primary" onclick="replyComment('+m+", "+t+')">Reply</button></span></div></span></div></div>'):$(".list-cmt-"+r).append('<div class="item-cmt item-sub-cmt cmt-'+m+" "+u+'" id="comment'+m+'" data-cmt-id="'+m+'"><span class="img-avatar"><img alt="" src='+i+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+l+'</div><div class="item-cmt-body">'+c+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">'+n+'</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-success btn-admin-custom btn-set-comment-public" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="setPublicReadingComment('+m+')"'+p+'>Set public</button><button type="button" class="btn btn-warning btn-admin-custom btn-set-comment-private" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="setPrivateReadingComment('+m+')"'+d+'>Set private</button><button type="button" class="btn btn-danger btn-admin-custom btn-del-lesson" data-id="'+m+'" data-question-id="'+o+'" data-reply-id="'+r+'" onclick="deleteReadingComment('+m+')">Del</button><button type="button" class="btn btn-sm btn-outline-primary" onclick="replyComment('+m+", "+t+')">Reply</button></span></div></span></div>'):0!=s.private&&s.user_id!=a.user_id||(0==r?$("#commentArea-"+t+" .comments-area").append('<div class="row list-cmt-area list-cmt-'+m+'" data-cmt-id="'+m+'"><div class="item-cmt cmt-'+m+'" id="comment'+m+'" data-cmt-id="'+m+'"><span class="img-avatar"><img alt="" src='+i+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+l+'</div><div class="item-cmt-body">'+c+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">'+n+'</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-sm btn-outline-primary" onclick="replyComment('+m+", "+t+')">Reply</button></span></div></span></div></div>'):$(".list-cmt-"+r).append('<div class="item-cmt item-sub-cmt cmt-'+m+'" id="comment'+m+'" data-cmt-id="'+m+'"><span class="img-avatar"><img alt="" src='+i+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+l+'</div><div class="item-cmt-body">'+c+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">'+n+'</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-sm btn-outline-primary" onclick="replyComment('+m+", "+t+')">Reply</button></span></div></span></div>'))}),-1==jQuery.inArray(t,isExpanded)){isExpanded.push(t);var s=current_user.avatar,i=current_user.username;$("#commentArea-"+t).append('<div class="item-reply-cmt" id="replyComment"><span class="img-avatar"><img alt="" src='+s+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+i+'</div><div class="item-cmt-body"><input type="text" placeholder=" Write your comment ..." class="reply-cmt reply-cmt-'+t+'" data-reply-cmt-id="0" data-question-id = "'+t+'"></div><div class="item-time-cmt"></div></span></div></div>')}if(0==$("#commentArea-"+t+" .comments-area .list-cmt-area").length&&$("#commentArea-"+t+" .comments-area").append('<p class="no-cmt">Chua co comment nao cho cau hoi nay!</p>'),$("#loading").hide(),e){if(question_id_noti&&comment_id_noti){$("html, body").animate({scrollTop:$(".solution-detail").offset().top},1e3);var c=60,n=$(".right-panel-custom").offset().top,m=(o=$("#comment"+comment_id_noti).offset().top)+(l=$(".right-panel-custom").scrollTop())-n;$(".right-panel-custom").animate({scrollTop:m-c}),$("#comment"+comment_id_noti).addClass("current-cmt"),setTimeout(function(){$("#comment"+comment_id_noti).addClass("time-out-current-cmt")},3e3)}}else{$("html, body").animate({scrollTop:$(".solution-detail").offset().top},1e3);var c=60,n=$(".right-panel-custom").offset().top,o=$("#commentArea-"+t).offset().top,l=$(".right-panel-custom").scrollTop(),m=o+l-n;$(".right-panel-custom").animate({scrollTop:m-c})}},error:function(t){$("#loading").hide(),console.log("Error:",t),bootbox.alert({message:"Error, please contact admin!",backdrop:!0})}})}function showKeywords(t){var e=baseUrl+"/showKeywords/"+t;console.log("keywords: "+t),$.ajax({type:"GET",url:e,dataType:"json",success:function(e){console.log("sucess:",e),$("#keywordArea-"+t+" .keywords-area").html(e)},error:function(t){console.log("Error:",t),bootbox.alert({message:"Error, please contact admin!",backdrop:!0})}})}function replyComment(t,e){var a=current_user.avatar,s=current_user.username,i=$(".cmt-"+t).parent().data("cmt-id"),c=$(".cmt-"+t).parent(".list-cmt-area");c.find(".item-reply-sub-cmt").length>0?$("input.reply-sub-cmt-"+e).data("reply-cmt-id",i):c.append('<div class="item-reply-sub-cmt item-sub-cmt" id="replySubComment"><span class="img-avatar"><img alt="" src='+a+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+s+'</div><div class="item-cmt-body"><input type="text" placeholder=" Write a reply ..." class="reply-cmt reply-sub-cmt reply-sub-cmt-'+i+'" data-reply-cmt-id="'+i+'" data-question-id = "'+e+'"></div><div class="item-time-cmt"></div></span></div></div>'),$("input.reply-sub-cmt-"+i).focus(),$("html, body").animate({scrollTop:$(".panel-container").offset().top},100);var n=$(".right-panel-custom").offset().top,m=$("input.reply-sub-cmt-"+i).offset().top+$(".right-panel-custom").scrollTop()-n;$(".right-panel-custom").animate({scrollTop:m-100},{duration:100,complete:function(){}})}function enterComment(t){if(13==t.keyCode){var e=current_user.id,a=$(this).val().trim();if(""!=a){$(this).val("");var s=$(this).data("question-id"),i=$(this).data("reply-cmt-id"),c=baseUrl+"/enterNewComment";console.log("reply: "+i+" question: "+s+"content: "+a);var n=$("input[name='_token']").val();$.ajax({type:"POST",url:c,dataType:"json",data:{_token:n,user_id:e,content_cmt:a,question_id_custom:s,reply_id:i},success:function(t){console.log("sucess:",t);var c=current_user.avatar,n=t.list_comment.id,m=current_user.username;$("p.no-cmt").remove(),$(".item-reply-sub-cmt").remove(),0!=t.list_comment.private&&t.list_comment.user_id!=e||(0==i?$("#commentArea-"+s+" .comments-area").append('<div class="row list-cmt-area list-cmt-'+n+'" data-cmt-id="'+n+'"><div class="item-cmt cmt-'+n+'" data-cmt-id="'+n+'"><span class="img-avatar"><img alt="" src='+c+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+m+'</div><div class="item-cmt-body">'+a+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">Just now</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-sm btn-outline-primary" onclick="replyComment('+n+", "+s+')">Reply</button></span></div></span></div></div>'):$(".list-cmt-"+i).append('<div class="item-cmt item-sub-cmt cmt-'+n+'" data-cmt-id="'+n+'"><span class="img-avatar"><img alt="" src='+c+'"/public/storage/img/users/" class="img-custom avatar-custom" /></span><span class="item-cmt-content"><div class="item-cmt-header">'+m+'</div><div class="item-cmt-body">'+a+'</div><div class="item-time-cmt"><span class="img-time-cmt"><img alt="time-cmt" src="/public/imgs/original/time.png" class="img-time-cmt" /></span><span class="time-ago-cmt">Just now</span><span class="reply-cmt pull-right"><button type="button" class="btn btn-sm btn-outline-primary" onclick="replyComment('+n+", "+s+')">Reply</button></span></div></span></div>')),$("input.reply-cmt-"+s).data("reply-cmt-id",0),$("html,body").animate({scrollTop:$(".cmt-"+n).offset().top-20},500)},error:function(t){console.log("Error:",t),bootbox.alert({message:"Error, please contact admin!",backdrop:!0})}})}}}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('[name="_token"]').val()}});var token=$('[name="_token"]').val(),baseUrl=document.location.origin;$(".btn-show-answered").click(function(){scrollToExplain($(this).data("qorder"))});